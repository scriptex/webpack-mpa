version: 2.1
jobs:
    build:
        docker:
            - image: circleci/php:8.0-node-browsers
        steps:
            - checkout
            - run:
                  name: native deps
                  command: sudo apt install -y gcc make automake libpng-dev libpng-devel
            - run:
                  name: install
                  command: yarn
            - run:
                  name: lint
                  command: yarn lint
            - run:
                  name: pwa
                  command: yarn pwa
            - run:
                  name: optisize
                  command: yarn optisize
            - run:
                  name: prod
                  command: yarn prod
